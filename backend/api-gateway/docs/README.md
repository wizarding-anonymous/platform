# Спецификация Компонента: API Gateway

**Версия:** 1.0
**Дата последнего обновления:** 2024-03-15

## 1. Обзор Компонента (Overview)

### 1.1. Назначение и Роль
*   API Gateway является критически важным инфраструктурным компонентом, служащим единой точкой входа для всех внешних клиентских запросов к платформе "Российский Аналог Steam".
*   Его основная роль - предоставить унифицированный и безопасный фасад для различных бэкенд-микросервисов. Он обрабатывает общие сквозные задачи, такие как маршрутизация запросов, аутентификация и авторизация, ограничение скорости (rate limiting) и терминирование SSL/TLS.
*   Основные бизнес-задачи: Упрощение клиентской разработки, повышение безопасности и управляемости платформы, централизация управления доступом к API.

### 1.2. Ключевые Функциональности
*   **Маршрутизация запросов:** Динамическая маршрутизация входящих клиентских запросов (HTTP, HTTPS, WebSocket) к соответствующим бэкенд-микросервисам на основе пути, хоста, метода или заголовков. Поддержка перезаписи пути.
*   **Аутентификация и Авторизация:** Интеграция с Auth Service для валидации учетных данных клиентов (в основном JWT, также API ключи). Может выполнять первичные проверки авторизации и внедрять контекст пользователя (ID, роли) в запросы, перенаправляемые внутренним сервисам.
*   **Ограничение скорости (Rate Limiting):** Защита бэкенд-сервисов от перегрузки путем применения лимитов на частоту запросов от отдельных клиентов.
*   **Терминирование SSL/TLS:** Обработка HTTPS запросов, их расшифровка и перенаправление (обычно по HTTP или mTLS) внутренним сервисам.
*   **Управление CORS:** Централизованное применение политик Cross-Origin Resource Sharing.
*   **Обеспечение безопасности:** Слой защиты от распространенных веб-атак, интеграция с Web Application Firewall (WAF). Применение стандартных заголовков безопасности.
*   **Трансформация запросов/ответов (опционально):** Модификация заголовков или, в редких случаях, тела запросов и ответов.
*   **Обнаружение сервисов (Service Discovery):** Интеграция с Kubernetes для динамического обнаружения и маршрутизации к работоспособным экземплярам сервисов.
*   **Мониторинг и Логирование:** Сбор метрик, логов и трейсов для всего входящего трафика.
*   **Проксирование WebSocket:** Поддержка проксирования WebSocket соединений к сервисам (например, Notification Service, Social Service).

### 1.3. Основные Технологии
*   **Рекомендуемые решения:** Kong Gateway или Tyk Gateway (согласно `project_technology_stack.md`).
*   **Оркестрация:** Kubernetes (версия 1.21+).
*   **Модель конфигурации:** Kubernetes Gateway API CRDs (предпочтительно) или специфичные CRD для Kong/Tyk. Управление конфигурацией через GitOps.
*   **Обнаружение сервисов:** Kubernetes Services.
*   **Ingress Control:** Обычно работает совместно с Ingress Controller (Nginx Ingress, Traefik).
*   (Ссылки на `project_technology_stack.md`, `project_glossary.md`)

### 1.4. Термины и Определения (Glossary)
*   См. `project_glossary.md`.
*   **CRD (Custom Resource Definition):** Расширение API Kubernetes.
*   **Ingress Controller:** Компонент Kubernetes, управляющий внешним доступом к сервисам в кластере.

## 2. Внутренняя Архитектура (Internal Architecture)

### 2.1. Общее Описание
*   API Gateway не является традиционным микросервисом с собственной сложной бизнес-логикой или выделенной базой данных для бизнес-сущностей. Его архитектура определяется выбранным решением (например, Kong, Tyk, Spring Cloud Gateway, Traefik) и его интеграцией в Kubernetes.
*   Основная "логика" заключается в декларативной конфигурации маршрутов, фильтров (плагинов) и политик безопасности.
*   Ниже представлена диаграмма, иллюстрирующая место API Gateway в общей архитектуре платформы:

```mermaid
graph TD
    subgraph "Внешние Клиенты"
        WebClient[Веб-клиент (Браузер)]
        MobileClient[Мобильное приложение]
        DesktopClient[Десктопное приложение]
        ThirdParty[Сторонние разработчики/API]
    end

    subgraph "Инфраструктура Платформы"
        direction LR
        APIGW[API Gateway]

        subgraph "Кластер Kubernetes"
            direction TB
            AuthSvc[Auth Service]
            AccountSvc[Account Service]
            CatalogSvc[Catalog Service]
            PaymentSvc[Payment Service]
            NotificationSvc[Notification Service (WebSocket)]
            OtherSvcs[...]

            K8sDiscovery[Kubernetes Service Discovery (CoreDNS/kube-proxy)]
        end

        subgraph "Системы Наблюдаемости (Observability)"
            direction TB
            Prometheus[Prometheus (Метрики)]
            Jaeger[Jaeger (Трассировка)]
            Loki[Loki (Логи)]
        end
    end

    WebClient --> APIGW
    MobileClient --> APIGW
    DesktopClient --> APIGW
    ThirdParty --> APIGW

    APIGW -- "1. Валидация JWT/API ключа" --> AuthSvc
    AuthSvc -- "2. Ответ (валиден/не валиден)" --> APIGW

    APIGW -- "3. Маршрутизация запроса" --> AccountSvc
    APIGW -- " " --> CatalogSvc
    APIGW -- " " --> PaymentSvc
    APIGW -- " " --> NotificationSvc
    APIGW -- " " --> OtherSvcs

    APIGW -- "Обнаружение сервисов" --> K8sDiscovery

    APIGW -- "Экспорт метрик" --> Prometheus
    APIGW -- "Экспорт трейсов" --> Jaeger
    APIGW -- "Экспорт логов" --> Loki

    classDef client fill:#cce5ff,stroke:#007bff,stroke-width:2px;
    classDef gateway fill:#d4edda,stroke:#28a745,stroke-width:4px;
    classDef service fill:#e9ecef,stroke:#6c757d,stroke-width:2px;
    classDef infra fill:#fff3cd,stroke:#ffc107,stroke-width:2px;
    classDef obs fill:#f8d7da,stroke:#dc3545,stroke-width:2px;

    class WebClient,MobileClient,DesktopClient,ThirdParty client;
    class APIGW gateway;
    class AuthSvc,AccountSvc,CatalogSvc,PaymentSvc,NotificationSvc,OtherSvcs service;
    class K8sDiscovery infra;
    class Prometheus,Jaeger,Loki obs;
```

### 2.2. Слои Сервиса (применительно к конфигурации и управлению)

#### 2.2.1. Presentation Layer (Слой Представления - Конфигурационный API/CRD)
*   Ответственность: Определяет, как администраторы или системы CI/CD конфигурируют поведение Gateway.
*   Ключевые компоненты/модули: Kubernetes Gateway API CRDs (`Gateway`, `HTTPRoute`, `TCPRoute`, etc.) или CRD выбранного вендора (KongIngress, TykAPIDefinition).

#### 2.2.2. Application Layer (Слой Применения Политик - ядро Gateway)
*   Ответственность: Применение сконфигурированных политик к трафику (маршрутизация, аутентификация, rate limiting, и т.д.). Это внутренняя логика самого продукта API Gateway.
*   Ключевые компоненты/модули: Механизмы обработки запросов, система плагинов (в Kong/Tyk).

#### 2.2.3. Domain Layer (Доменный Слой - отсутствует в традиционном понимании)
*   API Gateway оперирует понятиями "маршрут", "сервис", "потребитель", "плагин", которые являются его "доменом". Эти концепции отражены в его конфигурационных моделях.

#### 2.2.4. Infrastructure Layer (Инфраструктурный Слой - интеграции Gateway)
*   Ответственность: Взаимодействие с Kubernetes API (для service discovery, чтения CRD), Auth Service (для валидации токенов), системами мониторинга/логирования.
*   Ключевые компоненты/модули: Клиенты Kubernetes, HTTP/gRPC клиенты для Auth Service, экспортеры метрик/логов/трейсов.

## 3. API Endpoints (Конфигурируемые маршруты)

API Gateway сам по себе не определяет бизнес-эндпоинты, а **маршрутизирует** запросы к эндпоинтам, определенным в бэкенд-микросервисах.
*   См. документацию каждого микросервиса для деталей их API.
*   См. `project_api_standards.md` для общих стандартов API, которые API Gateway помогает обеспечивать.
*   Конфигурация маршрутов, сервисов и политик (например, аутентификация, ограничение скорости) осуществляется декларативно с использованием CRD Kubernetes (например, Gateway API `HTTPRoute`, `TCPRoute`, или CRD конкретного вендора шлюза вроде Kong `KongIngress`, `KongPlugin`).

**Пример конфигурации маршрута (иллюстративный, на основе Kubernetes Gateway API `HTTPRoute`):**
```yaml
apiVersion: gateway.networking.k8s.io/v1beta1
kind: HTTPRoute
metadata:
  name: example-service-route
  namespace: default # Пространство имен, где развернут Gateway или куда он "слушает"
spec:
  parentRefs:
  - name: main-platform-gateway # Имя ресурса Gateway, к которому привязывается этот маршрут
    namespace: gateway-infra # Пространство имен самого Gateway
  # hostnames: # Опционально, если Gateway настроен на конкретные хостнеймы
  # - "api.gameplatform.ru"
  rules:
  - matches:
    - path:
        type: PathPrefix # Тип совпадения пути
        value: /api/v1/example-service # Путь, который будет матчиться
    filters: # Фильтры применяются последовательно
    - type: RequestHeaderModifier # Пример: добавление общего заголовка
      requestHeaderModifier:
        add:
        - name: X-Request-ID # Обычно генерируется самим Gateway, это просто пример
          value: "dummy-request-id"
    # Концептуальный пример фильтра для JWT аутентификации
    # Реальная конфигурация будет зависеть от используемого Gateway и его плагина/фильтра JWT
    - type: ExtensionRef # Используется для кастомных фильтров или плагинов
      extensionRef:
        group: "jwt.konghq.com" # Пример для Kong JWT плагина
        kind: KongPlugin
        name: jwt-auth-main-platform
      # Конфигурация плагина (сильно упрощено):
      # config:
      #   uri_param_names: ["jwt"]
      #   cookie_names: ["access_token"]
      #   key_claim_name: "iss"
      #   secret: "{{ KONG_JWT_SECRET }}" # Ссылка на секрет Kubernetes
    # Концептуальный пример фильтра для ограничения скорости (Rate Limiting)
    - type: ExtensionRef
      extensionRef:
        group: "ratelimit.konghq.com" # Пример для Kong Rate Limiting плагина
        kind: KongPlugin
        name: rate-limit-general-platform
      # Конфигурация плагина (сильно упрощено):
      # config:
      #   minute: 5000
      #   policy: "local"
    backendRefs: # Определяет, куда направить трафик после успешного прохождения фильтров
    - name: example-service # Имя Kubernetes Service для бэкенда
      port: 8080 # Порт этого Service
      weight: 1 # Для канареечных релизов или A/B тестирования можно использовать веса
```
**Примечание:** Приведенный выше YAML является упрощенным и иллюстративным. Полная, операционная конфигурация API Gateway, включая все маршруты, политики безопасности, плагины и их параметры, находится в специализированном GitOps репозитории проекта (`deploy/api-gateway/` или аналогичном) и управляется через CI/CD пайплайны. См. `project_deployment_standards.md`.

## 4. Модели Данных (Data Models - Конфигурационные)

API Gateway не хранит бизнес-данные. Его "модели данных" - это структуры его конфигурации:
*   **Маршруты (Routes):** Определения правил сопоставления запросов.
*   **Сервисы (Services):** Определения вышестоящих (upstream) бэкенд-сервисов.
*   **Потребители (Consumers):** (Если используется) Определения клиентов API, к которым могут применяться специфичные политики.
*   **Плагины (Plugins):** Конфигурации для расширения функциональности (например, JWT-валидация, rate-limiting, CORS).
*   Эти модели определяются CRD Kubernetes или собственным форматом конфигурации API Gateway.

## 5. Потоковая Обработка Событий (Event Streaming)

API Gateway обычно не участвует напрямую в потоковой обработке бизнес-событий через Kafka, но он может:
*   Генерировать собственные операционные события/логи (например, логи доступа, ошибки маршрутизации) которые могут отправляться в систему логирования/мониторинга и далее в Kafka для анализа.
*   Проксировать WebSocket соединения, которые используются для потоковой передачи данных между клиентами и бэкенд-сервисами.

## 6. Интеграции (Integrations)

### 6.1. Внутренние Микросервисы
*   **Auth Service:**
    *   Тип интеграции: HTTP/gRPC вызовы.
    *   Назначение: Валидация JWT токенов, проверка API ключей. API Gateway может кэшировать публичные ключи (JWKS) от Auth Service.
    *   Контракт: Эндпоинт Auth Service для валидации токена или получения JWKS.
*   **Все бэкенд-микросервисы (Account, Catalog, Library, etc.):**
    *   Тип интеграции: HTTP/gRPC/WebSocket проксирование.
    *   Назначение: Перенаправление клиентских запросов к соответствующим сервисам.
    *   Контракт: API этих сервисов. API Gateway добавляет заголовки (`X-User-ID`, `X-User-Roles`) после успешной аутентификации.
*   **Kubernetes API (Service Discovery):**
    *   Тип интеграции: Внутренняя интеграция выбранного Gateway решения с K8s.
    *   Назначение: Обнаружение эндпоинтов (IP-адресов и портов) бэкенд-сервисов.

### 6.2. Внешние Системы
*   **Клиентские приложения (веб, мобильные, десктопные):** Являются основными потребителями API через Gateway.
*   **WAF (Web Application Firewall) (опционально):** Gateway может находиться за WAF или интегрироваться с ним.
*   **Системы Мониторинга/Логирования/Трассировки (Prometheus, ELK/Loki, Jaeger):** Экспорт данных.

## 7. Конфигурация (Configuration)

### 7.1. Переменные Окружения (для самого Gateway)
*   Зависят от выбранного решения (Kong, Tyk, etc.) и способа его развертывания.
*   Примеры общих переменных, которые могут использоваться:
    *   `GATEWAY_LOG_LEVEL`: Уровень логирования (например, `info`, `debug`, `error`). Пример: `info`.
    *   `GATEWAY_KUBERNETES_NAMESPACE`: Пространство имен, в котором работает Gateway (для самообнаружения или конфигурации). Пример: `gateway-infra`.
    *   `GATEWAY_CLUSTER_NAME`: Имя кластера для корректной маркировки метрик. Пример: `production-eu-central-1`.
    *   `GATEWAY_AUTH_SERVICE_URL`: URL сервиса аутентификации для валидации токенов. Пример: `http://auth-service.internal:8080/validate`.
    *   `GATEWAY_CONFIG_SOURCE_PATH`: Путь к файлам конфигурации или CRD, если не используется автоматическое обнаружение Kubernetes. Пример: `/etc/gateway/config`.
    *   `GATEWAY_PROMETHEUS_METRICS_PORT`: Порт для эндпоинта метрик Prometheus. Пример: `9100`.
*   Для конкретного решения (например, Kong):
    *   `KONG_DATABASE`: Тип базы данных (например, `postgres`, `off`).
    *   `KONG_PG_HOST`: Хост PostgreSQL (если `KONG_DATABASE=postgres`).
    *   `KONG_PROXY_LISTEN`: Адреса и порты, на которых Gateway слушает трафик. Пример: `0.0.0.0:8000, 0.0.0.0:8443 ssl`.
    *   `KONG_ADMIN_LISTEN`: Адрес и порт административного API. Пример: `127.0.0.1:8001`.
*   Точный список и назначение переменных окружения должны быть документированы в репозитории GitOps (`deploy/api-gateway/`) и/или в документации выбранного решения API Gateway.

### 7.2. Файлы Конфигурации (Declarative Configuration)
*   Основная конфигурация маршрутов, сервисов, плагинов и политик осуществляется декларативно через YAML файлы (CRDs Kubernetes, такие как `HTTPRoute`, `Gateway`, или специфичные для вендора CRD), хранящиеся в специализированном GitOps репозитории (`deploy/api-gateway/` или аналогичном).
*   Эти конфигурации применяются в кластер Kubernetes через CI/CD пайплайны, следуя принципам GitOps.
*   (Ссылка на `project_deployment_standards.md` для общих принципов GitOps).

## 8. Обработка Ошибок (Error Handling)

### 8.1. Общие Принципы
*   API Gateway должен возвращать стандартизированные коды ошибок HTTP и тела ответов в формате JSON, соответствующем `project_api_standards.md`, особенно для ошибок, генерируемых самим Gateway.
*   Ошибки от бэкенд-сервисов, как правило, проксируются клиенту без изменений, если только не настроены специфичные политики трансформации ошибок на уровне Gateway. Gateway может добавлять дополнительную информацию (например, `X-Gateway-Error` заголовок) для облегчения отладки.
*   Важно минимизировать утечку внутренней информации об ошибках бэкенд-сервисов, если они не соответствуют стандарту.

### 8.2. Распространенные Коды Ошибок (генерируемые Gateway)
*   **`400 Bad Request`**: Некорректный запрос к Gateway (например, неверный формат заголовков, которые Gateway ожидает).
    ```json
    {
      "errors": [
        {
          "status": "400",
          "code": "INVALID_REQUEST_SYNTAX",
          "title": "Некорректный синтаксис запроса",
          "detail": "Запрос не может быть обработан из-за синтаксической ошибки на стороне клиента."
        }
      ]
    }
    ```
*   **`401 Unauthorized`**: Ошибка плагина аутентификации (например, невалидный или отсутствующий JWT токен, неверный API ключ).
    ```json
    {
      "errors": [
        {
          "status": "401",
          "code": "AUTHENTICATION_FAILED",
          "title": "Ошибка аутентификации",
          "detail": "Учетные данные для аутентификации не были предоставлены или недействительны."
        }
      ]
    }
    ```
*   **`403 Forbidden`**: Доступ запрещен на уровне Gateway (например, JWT токен валиден, но не содержит необходимых ролей/прав; IP-адрес клиента в черном списке; или сработал плагин авторизации).
    ```json
    {
      "errors": [
        {
          "status": "403",
          "code": "FORBIDDEN",
          "title": "Доступ запрещен",
          "detail": "У вас нет разрешения на доступ к этому ресурсу."
        }
      ]
    }
    ```
*   **`404 Not Found`**: Маршрут не найден для запрошенного пути/хоста.
    ```json
    {
      "errors": [
        {
          "status": "404",
          "code": "ROUTE_NOT_FOUND",
          "title": "Ресурс не найден",
          "detail": "Запрашиваемый URL не соответствует ни одному настроенному маршруту."
        }
      ]
    }
    ```
*   **`429 Too Many Requests`**: Сработал глобальный или специфичный для маршрута Rate Limiter.
    ```json
    {
      "errors": [
        {
          "status": "429",
          "code": "RATE_LIMIT_EXCEEDED",
          "title": "Превышен лимит запросов",
          "detail": "Вы отправили слишком много запросов за короткий промежуток времени. Пожалуйста, повторите попытку позже."
          // "meta": { "retry_after_seconds": 60 } // Опционально
        }
      ]
    }
    ```
*   **`502 Bad Gateway`**: Бэкенд-сервис (upstream) вернул некорректный ответ, который Gateway не смог обработать, или бэкенд-сервис недоступен на сетевом уровне (например, connection refused).
    ```json
    {
      "errors": [
        {
          "status": "502",
          "code": "BAD_GATEWAY",
          "title": "Ошибка шлюза",
          "detail": "Сервер, выступая в роли шлюза или прокси-сервера, получил недействительный ответ от вышестоящего сервера."
        }
      ]
    }
    ```
*   **`503 Service Unavailable`**: Бэкенд-сервис недоступен (например, нет здоровых экземпляров сервиса после health checks, сработал Circuit Breaker) или сам Gateway перегружен и не может обработать запрос.
    ```json
    {
      "errors": [
        {
          "status": "503",
          "code": "SERVICE_UNAVAILABLE",
          "title": "Сервис временно недоступен",
          "detail": "Сервер в данный момент не может обработать запрос из-за временной перегрузки или технического обслуживания. Пожалуйста, повторите попытку позже."
          // "meta": { "retry_after_seconds": 120 } // Опционально
        }
      ]
    }
    ```
*   **`504 Gateway Timeout`**: Бэкенд-сервис (upstream) не ответил в установленный Gateway таймаут.
    ```json
    {
      "errors": [
        {
          "status": "504",
          "code": "GATEWAY_TIMEOUT",
          "title": "Время ожидания ответа шлюза истекло",
          "detail": "Сервер, выступая в роли шлюза, не дождался ответа от вышестоящего сервера в течение установленного времени."
        }
      ]
    }
    ```

## 9. Безопасность (Security)

### 9.1. Аутентификация
*   Централизованная проверка JWT токенов / API ключей через интеграцию с Auth Service.

### 9.2. Авторизация
*   Может выполнять грубую авторизацию на основе ролей из токена (например, доступ к `/admin/*` только для роли `admin`). Детальная авторизация остается за бэкенд-сервисами.

### 9.3. Защита Данных
*   Терминирование SSL/TLS.
*   Применение заголовков безопасности (HSTS, CSP, X-Frame-Options и т.д.).
*   Скрытие внутренней сетевой топологии.
*   (Ссылка на `project_security_standards.md`)

### 9.4. Управление Секретами
*   Секреты, используемые Gateway (например, для mTLS с бэкендами, ключи для плагинов), управляются через Kubernetes Secrets.

## 10. Развертывание (Deployment)

### 10.1. Инфраструктурные Файлы
*   Helm-чарты или Kubernetes манифесты для развертывания выбранного Gateway (Kong/Tyk).
*   Конфигурационные YAML файлы для CRD (маршруты, плагины).
*   (Ссылка на `project_deployment_standards.md`)

### 10.2. Зависимости при Развертывании
*   Kubernetes кластер.
*   Auth Service (для валидации токенов).
*   Service Discovery (встроенное в Kubernetes).

### 10.3. CI/CD
*   Пайплайны для применения конфигураций Gateway (маршруты, плагины) из Git в кластер (GitOps).
*   Обновление версий самого Gateway.

## 11. Мониторинг и Логирование (Logging and Monitoring)

### 11.1. Логирование
*   Формат: Зависит от Gateway (например, Nginx access log format для Kong). Должен быть настроен на JSON или другой структурированный формат.
*   Ключевые события: Логи доступа (каждый запрос), ошибки маршрутизации, ошибки плагинов.
*   Интеграция: ELK/Loki.
*   (Ссылка на `project_observability_standards.md`)

### 11.2. Мониторинг
*   Метрики (Prometheus):
    *   Количество запросов (total, per route, per service).
    *   Задержка запросов (latency - upstream, request, Kong/Tyk latency).
    *   Коды ответов HTTP (количество 2xx, 3xx, 4xx, 5xx).
    *   Состояние бэкенд-сервисов (health checks).
    *   Использование ресурсов Gateway.
*   Дашборды (Grafana): Обзор трафика, производительность API, ошибки.
*   Алерты (AlertManager): Высокий % ошибок 5xx, большая задержка, недоступность upstream сервисов.
*   (Ссылка на `project_observability_standards.md`)

### 11.3. Трассировка
*   Интеграция: OpenTelemetry, Jaeger. Gateway должен участвовать в создании/продолжении трейсов, передавая контекст бэкенд-сервисам.
*   (Ссылка на `project_observability_standards.md`)

## 12. Нефункциональные Требования (NFRs)
*   **Производительность**:
    *   Дополнительная задержка, вносимая Gateway (P99): < 10 мс (без учета времени на выполнение плагинов, требующих внешних вызовов, например, к Auth Service).
    *   Дополнительная задержка на плагин аутентификации JWT (локальная валидация): P99 < 2 мс.
    *   Пропускная способность: должна быть способна обрабатывать пиковую нагрузку всех публичных API платформы (цель: >10,000 запросов/сек на стандартной конфигурации пода).
*   **Масштабируемость**:
    *   Горизонтальное масштабирование: Поддержка автоматического масштабирования количества подов Gateway (HPA) на основе загрузки CPU/памяти.
    *   Способность обрабатывать до 5000 сконфигурированных маршрутов без существенной деградации производительности.
*   **Надежность**:
    *   Высокая доступность (High Availability): > 99.99% для плоскости данных (data plane).
    *   Отказоустойчивость: Сбой одного экземпляра Gateway не должен приводить к потере доступности API.
    *   Время перезагрузки конфигурации (например, после обновления CRD через GitOps): P95 < 30 секунд без потери трафика.
*   **Безопасность**:
    *   Надежная защита от распространенных атак уровня L7 (см. OWASP Top 10).
    *   Безопасная обработка и хранение (если необходимо кратковременно) учетных данных и токенов.
    *   Своевременное применение обновлений безопасности для используемого ПО Gateway.
*   **Сопровождаемость**:
    *   Конфигурация полностью управляется через GitOps.
    *   Простота добавления новых маршрутов и политик стандартными средствами Kubernetes.
    *   Исчерпывающие метрики и логи для диагностики проблем.

## 13. Приложения (Appendices) (Опционально)
*   Детальные примеры полной конфигурации для ключевых маршрутов и плагинов (включая специфичные для Kong/Tyk CRD, если Kubernetes Gateway API не покрывает все нужды) доступны в репозитории GitOps (`deploy/api-gateway/`) и в специализированной документации по настройке API Gateway.
*   TODO: Добавить ссылку на конкретный документ или раздел в GitOps репозитории, описывающий структуру конфигурации Gateway.

---
*Этот документ является отправной точкой и должен регулярно обновляться по мере развития конфигурации API Gateway.*
